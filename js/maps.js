function adminMap(a,c,b){return function(){var d,e=new ymaps.Map("map",{center:a,zoom:c});if(b=="point"){var d=new ymaps.GeoObject({geometry:{type:"Point",coordinates:a}});e.geoObjects.add(d)}e.events.add("click",function(h){var g=h.get("coords");if(d){d.geometry.setCoordinates(g)}else{d=i(g);e.geoObjects.add(d);d.events.add("dragend",function(){f(d.geometry.getCoordinates())})}f(g);function i(j){return new ymaps.Placemark(j,{iconCaption:"поиск..."},{preset:"islands#violetDotIconWithCaption",draggable:true})}function f(j){d.properties.set("iconCaption","поиск...");ymaps.geocode(j).then(function(k){var l=k.geoObjects.get(0);d.properties.set({iconCaption:[l.getLocalities().length?l.getLocalities():l.getAdministrativeAreas(),l.getThoroughfare()||l.getPremise()].filter(Boolean).join(", "),balloonContent:l.getAddressLine()})})}$('.create input[name="map"]').val(g)})}};
